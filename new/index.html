<html>
    <head>
        <title>Mixerno.Space</title>
  <link rel="shortcut icon"
    href="https://mixerno.space/icons/2.png">
  <link rel="stylesheet" href="../o2.css" />
  <meta charset="UTF-8">
  <meta name="description" content="The counter site.">
  <meta name="keywords" content="mixerno.space">
  <meta name="author" content="Mixerno">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--<link rel="stylesheet" href="counters/estimation.css">-->
  <script src="../odometer.js"></script>
  <script type="text/javascript" src="../jquery-3.1.1.min.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <link rel="stylesheet" href="../bootstrap.css">
  <script src="../bootstrap.js"></script>
    </head>
    <body>
        <center><div style="padding: 2vh; font-size: 3vh; background-color: rgb(32, 32, 32);">Twitter Live Follower Counter</div><br>
        <div class="boxerino"><br>
            <img src="https://mixerno.space/icons/2.png" id="image" style="border-radius: 50%; height: 10vh; width: 10vh;" >
            <div id="nameuser">Name</div>
            <div class="odometer" id="followerCount">0</div>
            <div style="font-size: 2vh;">Followers</div><br>
        </div><br><br><br>
        <div class="row">
            <div class="justbox">
                <div style="font-size: 4vh;" class="odometer" id="tweetsCount">0</div>
                <div style="font-size: 2vh;">Tweets</div>
            </div><br><br><br><br><br><br>
            <div class="justbox">
                <div style="font-size: 4vh;" class="odometer" id="followingCount">0</div>
                <div style="font-size: 2vh;">Following</div>
            </div>
        </div>
        <br>
        <div class="graphbox">
            <div>Follower Graph</div>
            <div id="graph"></div>
        </div>
        <br>
        <div class="buttons">
        <button data-toggle="modal" data-target="#changeuser">Change User</button><button data-toggle="modal" data-target="#compareuser">Compare</button><button data-toggle="modal" data-target="#changelog">Changelog</button>
    </div>
    <br><br><br><br><br><br>
    <div>There is a chat coming soon maybe. Also this is a beta. Check the changelog for new stuff.</div>
    </center>
    <div style="background-color: rgb(32, 32, 32); color: white;" class="container">
        <div class="modal fade" id="changeuser" role="dialog">
          <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-dialog">
            <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-content">
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-header">
               <!-- <button type="button" class="close" data-dismiss="modal">&times;</button>-->
                <h4 class="modal-title">Change User</h4>
              </div>
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-body">
               <input style="background-color: rgb(32, 32, 32); color: white;" placeholder="@" id="userinput" type="text">
              </div>
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-footer">
                <button type="button" style="background-color: rgb(32, 32, 32); color: white; border: solid 1px;border-color: rgb(46, 46, 46);" id="submitbutton" data-dismiss="modal">Submit</button><button type="button" style="background-color: rgb(32, 32, 32); color: white; border: solid 1px;border-color: rgb(46, 46, 46);" data-dismiss="modal">Cancel</button>
              </div>
            </div>
            
          </div>
        </div>
        
      </div>
      <div style="background-color: rgb(32, 32, 32); color: white;" class="container2">
        <div class="modal fade" id="compareuser" role="dialog">
          <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-dialog">
            <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-content">
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-header">
               <!-- <button type="button" class="close" data-dismiss="modal">&times;</button>-->
                <h4 class="modal-title">Compare user</h4>
              </div>
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-body">
               <input style="background-color: rgb(32, 32, 32); color: white;" placeholder="@" id="userinput2" type="text">
              </div>
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-footer">
                <button type="button" style="background-color: rgb(32, 32, 32); color: white; border: solid 1px;border-color: rgb(46, 46, 46);" id="submitbutton2" data-dismiss="modal">Submit</button><button type="button" style="background-color: rgb(32, 32, 32); color: white; border: solid 1px;border-color: rgb(46, 46, 46);" data-dismiss="modal">Cancel</button>
              </div>
            </div>
            
          </div>
        </div>
        
      </div>
      <div style="background-color: rgb(32, 32, 32); color: white;" class="container2">
        <div class="modal fade" id="changelog" role="dialog">
          <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-dialog">
            <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-content">
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-header">
               <!-- <button type="button" class="close" data-dismiss="modal">&times;</button>-->
                <h4 class="modal-title">Changelog</h4>
              </div>
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-body">
               <h1>Beta 1.0 design:</h1>
               <p>yeah new design with no refreshing to change user. :)</p>
              </div>
              <div style="background-color: rgb(32, 32, 32); color: white;" class="modal-footer">
                <button type="button" style="background-color: rgb(32, 32, 32); color: white; border: solid 1px;border-color: rgb(46, 46, 46);" data-dismiss="modal">Close</button>
              </div>
            </div>
            
          </div>
        </div>
        
      </div>
    </body>
    <style>
        
@font-face {
  font-family: Roboto;
    src: url(../fonts/Roboto-Regular.ttf);
}
        body {
            background: rgb(41, 43, 44);
            font-family:Roboto;
            color: white;
        }
        .boxerino {
            margin-left: 25%;
            margin-right: 25%;
            background-color: rgb(32, 32, 32);
            border: solid 1px;
            border-color: rgb(36, 36, 36);
            padding: 1vh;
        }
        .row {
            margin-left: 25%;
            margin-right: 25%;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      flex: 4;
    }

        .justbox {
            padding: 1vh;
            font-size: 3vh;
            background-color: rgb(32, 32, 32);
            border: solid 1px;
            border-color: rgb(36, 36, 36);
            width: 50%;
            height: 9vh;
        }
        .buttons {
            margin-left: 25%;
            margin-right: 25%;
            display: flex;
      flex-direction: row;
      justify-content: space-between;
      flex: 4;
        }
        button {
            padding: 2vh;
            background-color: rgb(32, 32, 32);
            width: 49%;
            font-size: 2vh;
            color: white;
            border: none;
        }
        .graphbox {
            padding: 1vh;
            font-size: 2vh;
            background-color: rgb(32, 32, 32);
            border: solid 1px;
            border-color: rgb(36, 36, 36);
            width: 50%;
            height: 47vh;
        }
        #followerCount {
            font-size: 5vh;
        }
        #nameuser {
            font-size: 4vh;
        }
    </style>
    <script>
         $(document).ready(function () {
             //var cors = "";
    var cors = "https://cors.mixerno.space/";
var graphData = new Highcharts.chart('graph', {
      chart: {
        backgroundColor: 'transparent',
        renderTo: graph,
        type: 'spline'
      },
      title: {
        text: ``
      },
      xAxis: {
        type: 'datetime',
        tickPixelInterval: 500,
        labels: {
          style: {
            color: "#FFFFFF"
          }
        }
      },
      yAxis: {
        title: {
          text: ''
        },
        
        lineColor: "#53adcb",
        minorGridLineColor: "#53adcb",
        tickColor: "#53adcb"
      },

      credits: {
        enabled: false,
        text: "Mixerno.space"
      },

      series: [{
        showInLegend: false,
        name: 'Followers',
        marker: {
          enabled: false
        },
        color: '#53adcb',
        lineColor: '#53adcb'

      }]
    })
    var windlochref = window.location.href;
    var params = windlochref.split('&u=');
    if(params[1] == undefined) {
        window.history.pushState("y", "g", `?&u=barackobama`);
        windlochref = window.location.href;
        params = windlochref.split('&u=');
        getData(params[1]);
    getVisuals(params[1]);
    } else {
        getData(params[1]);
    getVisuals(params[1]); 
    }
    
   
    
    function getData(id) {
        windlochref = window.location.href;
        params = windlochref.split('&u=');
        fetch(`https://bastet.socialblade.com/twitter/lookup?query=${id}`)
            .then(response => response.json())
            .then(data => {
                console.log(data)
                if(data == 0) {
                    console.log("GJ TWITTER API lol")
                } else {
                followerCount.innerHTML = data
          /*ytname.innerHTML = data.username
          totalviews.innerHTML = data.points
          videos.innerHTML = data.followingCount
          $("#image").attr('src', `${data.userimage}`);*/
          graphData.series[0].addPoint([
            (new Date()).getTime(),
            data
          ]);
          if (graphData.series[0].data.length >= 700) {
            graphData.series[0].data[0].remove()
          }
        }
            })
    }
    function getVisuals(id) {
        fetch(`${cors}https://api.mixerno.space/twitter/user/${id}`)
            .then(response => response.json())
            .then(data => {
                console.log(data)
                if(data.name == undefined) {
                    console.log("#ERROR.")
                } else {
                    nameuser.innerHTML = data.name
                  tweetsCount.innerHTML = data.tweets
          followingCount.innerHTML = data.following
          $("#image").attr('src', `${data.pfp}`);
                }
            })
    }
    setInterval(function() {
        getData(params[1]);
    }, 2000);
    setInterval(function() {
        getVisuals(params[1]);
    }, 30000);
    $('#userinput').on('keyup', function (e) {
      if (e.keyCode === 13) {
        $('#submitbutton').click();
      }
    });
    //
    $('#submitbutton').click(function () {
      window.history.pushState("y", "g", `?&u=${$('#userinput').val()}`);
      windlochref = window.location.href;
        params = windlochref.split('&u=');
      graphData = new Highcharts.chart('graph', {
      chart: {
        backgroundColor: 'transparent',
        renderTo: graph,
        type: 'spline'
      },
      title: {
        text: ``
      },
      xAxis: {
        type: 'datetime',
        tickPixelInterval: 500,
        labels: {
          style: {
            color: "#FFFFFF"
          }
        }
      },
      yAxis: {
        title: {
          text: ''
        },
        
        lineColor: "#53adcb",
        minorGridLineColor: "#53adcb",
        tickColor: "#53adcb"
      },

      credits: {
        enabled: false,
        text: "Mixerno.space"
      },

      series: [{
        showInLegend: false,
        name: 'Followers',
        marker: {
          enabled: false
        },
        color: '#53adcb',
        lineColor: '#53adcb'

      }]
    })
        getData(params[1]);
    getVisuals(params[1]);
    
    });
    $('#userinput2').on('keyup', function (e) {
      if (e.keyCode === 13) {
        $('#submitbutton2').click();
      }
    });
    //
    $('#submitbutton2').click(function () {
      location.href = "../twitter-compare/"
    
    });
         });
    </script>
</html>